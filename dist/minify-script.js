const pokemonRepository=function(){let e=[];function t(t){"object"==typeof t&&"name"in t&&"detailsUrl"in t?e.push(t):document.alert("pokemon is not correct")}function o(){return e}function n(e){return fetch(e.detailsUrl).then(function(e){return e.json()}).then(function(t){e.imageUrl=t.sprites.front_default,e.height=t.height,e.weight=t.weight,e.types=t.types}).catch(function(e){console.error(e)})}function i(e){n(e).then(function(){a(e)})}let s=document.querySelector("#pokemon-modal");function a(e){let t=$(".modal-body"),o=$(".modal-title");o.empty(),t.empty();let n=$(`<h1 class="pokemonName" > + capitalizeFirstLetter(${e.name}) + </h1>`),i=$(`<img alt="pokemon-image" src="${e.imageUrl}" class="modal-img" style="width:40%">`),a=$(`<p class="pokemonHeight"> + Height:  + ${e.height} + </p>`),l=$(`<p class="pokemonWeight"> + Weight:  + ${e.weight} + </p>`),r=[];Object.keys(e.types).forEach(t=>{r.push(" "+e.types[t].type.name)});let p=$(`<p class="pokemonTypes"> + Type(s):  + ${r} + </p>`);o.append(n),t.append(i),t.append(a),t.append(l),t.append(p),s.classList.add("is-visible"),$("#pokemonModal").modal("show")}function l(){s.classList.remove("is-visible")}function r(e){let t=e.replace(/^./,e[0].toUpperCase());return t}return window.addEventListener("keydown",e=>{"Escape"===e.key&&s.classList.contains("is-visible")&&l()}),s.addEventListener("click",e=>{e.target===s&&l()}),{add:t,getAll:o,addListItem:function e(t){let o=document.querySelector(".list-group"),n=document.createElement("li");n.classList.add("group-list-item"),n.classList.add("col-sm-4","col-md-6","col-lg-12");let s=document.createElement("button");s.innerText=r(t.name),s.classList.add("pokemon-button"),s.setAttribute("data-toggle","modal"),s.setAttribute("data-target","#pokemon-modal"),s.addEventListener("click",function(){i(t)}),n.appendChild(s),o.appendChild(n)},loadList:function e(){return fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then(function(e){return e.json()}).then(function(e){e.results.forEach(function(e){t({name:r(e.name),detailsUrl:e.url})})}).catch(function(e){console.error(e)})},loadDetails:n,showDetails:i,showModal:a,hideModal:l,searchPokemon:function e(){let t=document.getElementById("search-bar").value.toLowerCase(),o=pokemonRepository.getAll().filter(e=>e.name.toLowerCase().includes(t));document.querySelector(".list-group").innerHTML="",o.forEach(e=>{pokemonRepository.addListItem(e)})}}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});